/**
 * Package: angular-video-background - v1.0.3
 * Description: use any video as background for your html pages with many options
 * Last build: 2017-12-19
 * @author codekraft-studio
 * @license ISC
 */

angular.module("video-background",[]).run(["$templateCache",function(a){a.put("angular-video-background/main.html",'<video></video><div class="video-controls"><span ng-bind="currentTime | number: 2"></span></div>')}]),angular.module("video-background").directive("videoBackground",["$log","$timeout","$document",function(a,b,c){function d(d,e,f){function g(a){if("INPUT"!==a.target.nodeName)return a.target===e[0]||(!(o!==a.target&&!o.contains(a.target))||void 0)}function h(a){27===a.which&&g(a)&&(n.pause(),n.currentTime=0,d.onStop()),32!==a.which||n.endend||(n.paused?n.play():n.pause()),38===a.which&&g(a)&&(n.volume=n.volume+.1<1?n.volume+.1:1),40===a.which&&g(a)&&(n.volume=n.volume-.1>0?n.volume-.1:0)}function i(a){37===a.which&&g(a)&&(a.preventDefault(),!n.paused&&n.autopause&&g(a)&&n.pause(),n.currentTime>0&&n.currentTime>=2&&g(a)?n.currentTime-=2:n.currentTime=0),39===a.which&&g(a)&&(a.preventDefault(),!n.paused&&n.autopause&&n.pause(),n.currentTime<n.duration?n.currentTime+=2:n.currentTime=n.duration)}if(!d.source||!angular.isObject(d.source)||!Object.keys(d.source).length)return void a.warn("VideoBg: Expected a valid object, received:",d.source);var j,k=["mp4","webm","ogg"],l=e.children().eq(0),m=e.children().eq(1),n=l[0],o=e.parent()[0];n.firstPlay=!0,n.firstEnd=!0,n.autopause=void 0!==f.autopause&&"false"!==f.autopause,n.loop=void 0!==f.loop&&"false"!==f.loop,n.volume=f.volume&&0<=f.volume&&f.volume<=1?f.volume:1,n.defaultPlaybackRate=f.playbackRate?f.playbackRate:1,l.addClass("ng-hide"),m.addClass("ng-hide"),l.addClass("video-background");for(var p in d.source)if(d.source.hasOwnProperty(p)&&k.indexOf(p)>-1){var q=document.createElement("source");q.src=d.source[p],q.type="video/"+p,n.appendChild(q)}else a.warn("videoBg: You passed a type",p,"that is not valid, must be one of theese: [mp4,webm,ogg]");n.onended=function(){n.firstEnd&&(n.firstEnd=!1,d.onFirstend())},n.onloadeddata=function(){n.currentTime=f.startTime?f.startTime:0,d.currentTime=n.currentTime,void 0!==f.keyControls&&"false"!==f.keyControls&&(c.on("keydown",i),c.on("keyup",h),d.$on("$destroy",function(){c.off("keydown",i),c.off("keyup",h)})),l.removeClass("ng-hide"),void 0!==f.autoplay&&"false"!==f.autoplay&&n.play()},n.ontimeupdate=function(){f.endTime&&f.endTime<=n.currentTime&&(d.currentTime=f.endTime,n.currentTime=n.duration),d.$apply(function(){return d.currentTime=n.currentTime})},n.onplay=function(){n.firstPlay&&(n.firstPlay=!1,d.onFirstplay()),d.onPlay()},n.onseeking=function(){void 0!==f.controlBox&&"false"!==f.controlBox&&d.$apply(function(){m.removeClass("ng-hide")})},n.onseeked=function(){void 0!==f.controlBox&&"false"!==f.controlBox&&(b.cancel(j),"auto"===f.controlBox&&(j=b(function(){d.$apply(function(){m.addClass("ng-hide")})},2e3)))},n.onpause=function(){void 0!==f.controlBox&&"false"!==f.controlBox&&(b.cancel(j),m.removeClass("ng-hide"),"auto"===f.controlBox&&(j=b(function(){d.$apply(function(){m.addClass("ng-hide")})},2e3))),d.onPause()}}return{restrict:"E",scope:{source:"=",onPlay:"&",onPause:"&",onStop:"&",onFirstplay:"&",onFirstend:"&"},templateUrl:"angular-video-background/main.html",link:d}}]);